var deck = Deck;
deck.shuffle();

function Select(ply) {
    var c1 = deck.draw();
    var c2 = deck.draw();

    if (c1.value() == c2.value()) and (c1.color() == c2.color()) {
        ply.drawCard(c1);
        ply.drawCard(c2);
    }
    else {
        deck.addCard(c1);
        deck.addCard(c2);
        deck.shuffle();
    }
}

// This is a test
var p1 = Player;
var p2 = Player;
var currentPlayer = p1;

while (true) {
    if deck.deckSize() <= 1 {
        break;
    }

    if currentPlayer == p1 {
        Select(p1);
        currentPlayer = p2;
    }
    else {
        Select(p2);
        currentPlayer = p1;
    }
}

var hs1 = p1.getHandSize();
var hs2 = p2.getHandSize();

if hs1 == hs2 {
    print("Tie");
}
else if hs1 > hs2 {
    print("Player 1 wins");
}
else {
    print("Player 2 wins");
}